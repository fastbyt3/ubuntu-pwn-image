FROM ubuntu:latest

WORKDIR /pwn/

# add i386 architecure
RUN dpkg --add-architecture i386

# Env Var
ENV DEBIAN_FRONTEND=noninteractive

# Perform basic update and upgrade
RUN apt-get update -y && apt-get upgrade -y

# Install required packages
RUN apt-get install -y \
	wget \
	curl \
	net-tools \
	iputils-ping \
	git \
	strace \
	ltrace \
	file \
	vim \
	nasm \
	gcc-multilib \
	g++-multilib \
	libc6-dbg \
	libc6-dbg \
	cmake \
	gdb \
	gdb-multiarch \
	build-essential \
	python2-dev \
	python3-dev \
	python3-pip \
	python3-distutils \
	ipython3 \
	libc6:i386 \
	libc6-dbg:i386 \
	libc6-dbg \
	lib32stdc++6 \
	netcat \
	tmux

# Python3 pip upgrade and install python modules
RUN python3 -m pip install --upgrade pip && \
	python3 -m pip install --no-cache-dir \
	pwntools \
	keystone-engine \
	unicorn \
	capstone \
	ropper \
	ropgadget

# Python2 pip
RUN curl https://bootstrap.pypa.io/pip/2.7/get-pip.py --output get-pip.py && \
	python2 get-pip.py && \
	rm get-pip.py && \
	pip2 install pwntools pathlib2


# GEF - GDB plugin install
RUN bash -c "$(curl -fsSL http://gef.blah.cat/sh)"